
# OpenCV 高速公路即時車流量計數程式

使用 OpenCV、MobileNet SSD、Caffe 深度學習模型和 dlib 追蹤技術的車輛計數系統，能夠讀取影片檔案或即時攝影畫面，自動偵測並統計通過畫面中指定區域的車輛數量

搭配 CentroidTracker 多對象質心追蹤演算法，當車輛穿越設定的計數線時自動計數，並將結果連同時間戳記儲存到 MySQL 資料庫中

# 影像處理流程

- 幀差異檢測 - 使用 `cv2.absdiff()` 比較前後影像找出有在移動的物件(`把連續兩張影像相減，看哪裡有變化`)
- 雜訊清理 - 高斯模糊 + 二值化處理 
  - 使用 `cv2.GaussianBlur()` 平滑影像，減少雜訊干擾
  - 使用 `cv2.threshold()` 將影像轉為二值圖，便於後續處理
- 形態學操作 - 膨脹和閉合操作，讓偵測到的物件形狀更完整清楚
- 輪廓檢測 - 找出移動物件的邊界
- 尺寸過濾 - 只保留大小像車的物件

# features

- 影像差異檢測：比較前後影像找出有在移動的東西
- 輪廓分析：過濾掉太小的物件，只留下可能是車的
- 越線計數：設一條線，車子經過就 +1
- 即時顯示：視覺化檢測結果和計數資訊
- 資料庫儲存：記錄時間戳和計數資料，存到資料庫

# 流程

┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   Video Input   │───▶│  Frame Processor │───▶│  SSD MobileNet  │
│  (File/Camera)  │    │   (OpenCV)       │    │   (Detection)   │
└─────────────────┘    └──────────────────┘    └─────────────────┘
                                                         │
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│  MySQL Database │◀───│ Counting Logic   │◀───│ Centroid Tracker│
│   (Data Store)  │    │   (Line Cross)   │    │   (dlib/Track)  │
└─────────────────┘    └──────────────────┘    └─────────────────┘

# 參數調整

- min_contour_width = 40   # 最小物件寬度
- min_contour_height = 40  # 最小物件高度
- line_height = 550        # 計數線位置
- offset = 10              # 計數容差範圍

# 資料庫設定

更新程式碼中的資料庫連接參數：
